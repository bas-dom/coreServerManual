# 双网卡同时上内外网的网络结构示意图

[![](http://c.hiphotos.baidu.com/exp/w=500/sign=b1b800730e23dd542173a768e108b3df/4610b912c8fcc3ceb956b5249545d688d43f2016.jpg "教你如何设置同时上内外网（单网卡或双网卡）")](http://jingyan.baidu.com/album/f0e83a2583c0cb22e5910112.html?picindex=4)

这种网络结构的特点是内网、外网没有融合到一起，而是通过在电脑上安装两个网卡来实现访问内、外网。普通情况下如果想上内网的话就把外网的网卡禁用掉，反之亦然。（当然内、外网的网卡都要配置各自的IP地址） 重点来了：我们现在要做的是在不禁用网卡的情况下，实现内外网的自动切换。

# 假设

外网：IP地址192.168.1.xxx   掩码：255.255.255.0   网关：192.168.1.1

内网：IP地址172.18.100.xxx  掩码：255.255.255.0   网关：172.18.100.254

# 步骤

1、外网的那块网卡需要IP地址、子网掩码、网关、DNS都设置好。

2、内网的网卡只设置IP地址、子网掩码即可（**因为一台电脑不能同时设置两个网关的**）

3、在命令提示符里输入：route add 172.18.0.0 mask 255.255.0.0 172.18.100.254

> 这套命令的作用是把所有访问内网172.18.xxx.xxx的请求转发给内网网关172.18.100.254

---

# 详细解释

 解决windows 7双网卡分别接内外网冲突  
  
因此解决方法就是只配置一个网关，另一个网络用一条静态路由就好了。  
  
第一步，先将外网网卡按正常配置好。再配置内网网卡，注意内网默认网关留空。  
  
第二步，route print一下，确认0.0.0.0从走外网网关。  
  
若当前默认不是外网网关，用管理员身份启动cmd，先route delete 0.0.0.0，  
  
再route add 0.0.0.0 mask 0.0.0.0 zzz.zzz.zzz.zzz（外网关）。  
  
第三步，route add -p 192.168.100.0 mask 255.255.255.0 192.168.100.1 if 14  
  
其中，14为内网接口号，可以从route print中看到。-p表示添加静态路由，即重启后不会丢失。

