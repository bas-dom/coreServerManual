# 双网卡同时上内外网的网络结构示意图

[![](http://c.hiphotos.baidu.com/exp/w=500/sign=b1b800730e23dd542173a768e108b3df/4610b912c8fcc3ceb956b5249545d688d43f2016.jpg "教你如何设置同时上内外网（单网卡或双网卡）")](http://jingyan.baidu.com/album/f0e83a2583c0cb22e5910112.html?picindex=4)

这种网络结构的特点是内网、外网没有融合到一起，而是通过在电脑上安装两个网卡来实现访问内、外网。普通情况下如果想上内网的话就把外网的网卡禁用掉，反之亦然。（当然内、外网的网卡都要配置各自的IP地址） 重点来了：我们现在要做的是在不禁用网卡的情况下，实现内外网的自动切换。

# 假设

外网：IP地址192.168.1.xxx   掩码：255.255.255.0   网关：192.168.1.1

内网：IP地址172.18.100.xxx  掩码：255.255.255.0   网关：172.18.100.254

# 步骤

1、外网的那块网卡需要IP地址、子网掩码、网关、DNS都设置好。

2、内网的网卡只设置IP地址、子网掩码即可（**因为一台电脑不能同时设置两个网关的**）

3、在命令提示符里输入：route add 172.18.0.0 mask 255.255.0.0 172.18.100.254

> 这套命令的作用是把所有访问内网172.18.xxx.xxx的请求转发给内网网关172.18.100.254



